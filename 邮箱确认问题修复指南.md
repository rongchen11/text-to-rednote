# 邮箱确认问题修复指南

## 问题描述
用户注册成功但无法登录，控制台显示 "Email not confirmed" 错误。

## 原因分析
Supabase 默认启用了邮箱确认功能，但我们的系统使用用户名而不是真实邮箱进行注册（格式：`username@local.app`），这些虚拟邮箱无法接收确认邮件。

## 解决方案

### 方法一：在 Supabase 控制台禁用邮箱确认（推荐）

1. 登录 [Supabase 控制台](https://supabase.com/dashboard)
2. 选择你的项目
3. 进入 **Authentication** > **Settings**
4. 找到 **Email Confirmation** 选项
5. 将其设置为 **禁用 (Disabled)**
6. 保存设置

### 方法二：手动确认现有用户（临时解决）

如果你已经有注册但未确认的用户，可以在 Supabase 控制台手动确认：

1. 进入 **Authentication** > **Users**
2. 找到你注册的用户
3. 点击用户行，进入用户详情
4. 将 **Email Confirmed** 状态设置为 **true**

## 验证修复

1. 重新启动开发服务器（如果需要）
2. 尝试使用之前注册的用户名和密码登录
3. 如果仍有问题，可以注册一个新用户进行测试

## 注意事项

- 禁用邮箱确认后，所有新注册的用户都会自动确认
- 这适用于开发环境，生产环境请根据实际需求决定是否启用邮箱确认
- 如果启用邮箱确认，需要配置真实的邮箱服务

## 技术细节

我们的认证系统：
- 使用用户名作为主要标识符
- 将用户名转换为虚拟邮箱格式：`username@local.app`
- 在 `user_profiles` 表中存储真实的用户名和积分信息
- Supabase Auth 表中存储认证信息